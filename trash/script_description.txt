Структура скрипта airbnb_regression_analysis.R:
1. Загрузка данных (строки 1-30)
Загрузка библиотек (readr, dplyr, ggplot2, car, MASS и др.)
Загрузка listings_gz.csv
Просмотр структуры данных
2. Предварительная обработка (строки 32-50)
Преобразование цены из формата "$132.00" в числовой
Удаление пропусков в цене
Базовая статистика
3. EDA (Exploratory Data Analysis) (строки 52-130)
Распределение цен (обычное и логарифмическое)
Цена по типу комнаты (boxplot)
Цена по районам (топ-10)
Корреляционная матрица
Диаграммы рассеяния (цена vs ключевые переменные)
Все графики сохраняются в папку plots/
4. Подготовка данных для моделирования (строки 132-239)
Выбор релевантных переменных
Обработка пропусков (заполнение медианой)
Преобразование категориальных переменных
Сохранение подготовленного датасета
5. Построение моделей (строки 241-320)
Model 1: Базовая (только числовые переменные)
Model 2: + категориальные переменные
Model 3: + логарифмическая трансформация цены
Model 4: + взаимодействия
Model 5: Stepwise regression (автоматический отбор переменных)
6. Диагностика моделей (строки 322-400)
Графики остатков (4 типа)
Проверка мультиколлинеарности (VIF)
Выявление выбросов (Cook's distance)
Тест на нормальность остатков (Shapiro-Wilk)
Тест на гетероскедастичность (Breusch-Pagan)
7. Сравнение моделей (строки 402-450)
Таблица сравнения (R², Adjusted R², AIC, BIC)
F-тесты для сравнения вложенных моделей
Сохранение результатов
8. Cross-Validation (строки 452-480)
5-fold cross-validation
Вычисление RMSE для каждой fold
Сохранение результатов
9. Финальная модель (строки 482-510)
Вывод коэффициентов с p-values
Доверительные интервалы (95%)
Сохранение результатов
Что создаст скрипт:
Папка plots/ с графиками EDA и диагностики
data/model_data.csv — подготовленный датасет
models.RData — сохраненные модели
model_comparison.csv — сравнение моделей
cv_results.csv — результаты cross-validation
final_model_coefficients.csv — коэффициенты финальной модели